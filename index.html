<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Feed Gaya Twitter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <style>
    .highlight {
      background-color: #fef08a; /* kuning */
      transition: background-color 1.5s ease;
    }
  </style>
</head>
<body class="bg-gray-100 font-sans">
  <!-- Header -->
  <header class="bg-white shadow p-4 flex items-center">
    <img src="profile.jpg" alt="Avatar" class="rounded-full w-10 h-10 mr-3">
    <div>
      <h1 class="font-bold text-lg">Muhamad Firdaus</h1>
      <p class="text-gray-500 text-sm">@hellodaus</p>
    </div>
  </header>


  <!-- Feed -->
  <main id="feed" class="max-w-md mx-auto mt-4 space-y-4 px-2">
    <!-- Post dari CSV akan load di sini -->
  </main>

  <script>
    const feed = document.getElementById('feed');
    const tweetBtn = document.getElementById('tweetBtn');
    const tweetInput = document.getElementById('tweetInput');

    // Fungsi untuk render tweet dengan highlight
    function renderTweet(text, date = null, time = null) {
      const now = new Date();
      const postDate = date || now.toLocaleDateString('ms-MY', { day: '2-digit', month: 'long', year: 'numeric' });
      const postTime = time || now.toLocaleTimeString('ms-MY', { hour: '2-digit', minute: '2-digit' });

      const post = document.createElement('article');
      post.className = 'bg-white rounded-xl shadow p-4 highlight';
      post.innerHTML = `
        <div class="flex items-start">
          <img src="profile.jpg" class="w-10 h-10 rounded-full mr-3">
          <div>
            <h2 class="font-semibold">Muhamad Firdaus</h2>
            <p class="text-sm text-gray-500 mb-2">${postDate} Â· ${postTime}</p>
            <p class="text-gray-800">${text}</p>
          </div>
        </div>
      `;

      feed.prepend(post);

      // Animasi highlight (hilang selepas 1.5s)
      setTimeout(() => {
        post.classList.remove('highlight');
      }, 1500);

      // Auto-scroll ke atas
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Load CSV dan render tweet
    fetch('data.csv')
      .then(response => response.text())
      .then(csv => {
        Papa.parse(csv, {
          header: true,
          delimiter: '|',
          complete: function(results) {
            results.data.forEach(row => {
              if (row.twt) {
                renderTweet(row.twt, row.date, row.masa);
              }
            });
          }
        });
      });

    // Tambah tweet manual
    tweetBtn.addEventListener('click', () => {
      const text = tweetInput.value.trim();
      if (!text) {
        alert('Tulis sesuatu dahulu!');
        return;
      }
      renderTweet(text);
      tweetInput.value = '';
    });
  </script>
</body>
</html>
